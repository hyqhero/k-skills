---
name: vibe-requirement-optimizer
description: 通过多轮对话帮助编程小白澄清需求、选择技术框架、确认环境并生成规范的需求文档，避免因需求不清或技术栈选择错误导致的开发失败。
---

# Vibe编程需求优化技能

## 技能概述

本技能通过**多轮对话**的方式，帮助编程小白将模糊的想法转化为清晰的技术方案。

**核心特性**：
- 多轮对话，逐步澄清需求，不是一次性完成
- 根据用户技术水平推荐合适的技术栈
- 避免过度设计，保持简单，保护学习信心
- 最终生成可直接执行的需求文档

---

## 核心原则

### 必须遵守的原则

1. **避免过度设计**
   - 引导用户聚焦1-2个核心功能
   - 明确标注"暂时不做"的功能
   - 控制开发周期在1-2天

2. **根据用户技术水平调整方案**
   - 完全小白→无代码/低代码，避免数据库
   - 有基础→云数据库（如Supabase），利用AI编程工具
   - 有经验→本地数据库，完整技术栈

3. **多轮对话，逐步完善**
   - 不要试图一次性完成所有事情
   - 每个阶段都可以多轮对话
   - 根据用户反馈不断调整

4. **保护学习信心**
   - 确保第一个版本能快速跑起来
   - 避免因技术门槛过高打击积极性
   - 鼓励小步迭代，逐步完善

---

## 多轮对话阶段

本技能的执行不是线性的"4步流程"，而是4个**多轮对话阶段**。每个阶段都可以进行多轮对话，根据用户反馈不断调整。

---

### 阶段1：需求澄清与水平评估

**目标**：理解用户的需求和意图，了解用户的技术水平

**可以多轮对话，逐步明确**：

1. **询问开发目标**
   - "你想开发什么应用？"
   - "这个应用主要用来做什么？"
   - "最核心的功能是什么？"

2. **了解技术水平**
   - "你之前有写过代码吗？"
   - "了解Python、JavaScript这些编程语言吗？"
   - "听说过AI编程工具（如GitHub Copilot、Cursor）吗？"
   - "有做过什么小项目吗？"

3. **澄清需求细节**（可能需要多轮）
   - "这个功能具体是什么意思？"
   - "能举个例子吗？"
   - "这个功能是一开始就需要，还是后续可以加？"

4. **明确核心功能**（避免过度设计）
   - 提炼1-2个最核心的功能
   - 明确标注暂时不做的功能
   - 与用户确认核心功能列表

**对话示例**：

> 智能体：你想开发什么应用？
>
> 用户：我想做一个博客
>
> 智能体：好的，博客。主要用来做什么？发布技术文章吗？
>
> 用户：对，发布技术文章
>
> 智能体：了解。你之前有写过代码吗？
>
> 用户：完全没有，我是小白
>
> 智能体：明白了。那我们先做一个最简单的版本，只需要发布文章和展示文章，可以吗？评论、搜索这些功能后续再加。
>
> 用户：可以
>
> 智能体：好的，核心功能确定了：文章发布、文章展示。我们进入下一个阶段。

**本阶段完成后，进入阶段2**

---

### 阶段2：技术框架选择与确认

**目标**：根据用户技术水平，推荐2个技术框架，与用户确认选择

**可以多轮对话，逐步确认**：

1. **根据技术水平匹配框架**
   - 完全小白→Hexo、Jekyll等静态博客生成器
   - 有基础→Flask、FastAPI等Web框架
   - 有经验→Django、Next.js等完整框架

2. **选择2个框架对比**
   - 查阅 [framework-guide.md](references/framework-guide.md)
   - 从多个维度对比：开发难度、学习曲线、功能完整性、社区支持、部署复杂度、数据存储方案

3. **展示对比给用户**
   ```
   方案A：[框架名称]
   - 优点：[2-3个核心优点]
   - 缺点：[1-2个主要缺点]
   - 适合场景：[1句话说明]

   方案B：[框架名称]
   - 优点：[2-3个核心优点]
   - 缺点：[1-2个主要缺点]
   - 适合场景：[1句话说明]

   推荐方案：[方案A/B]
   理由：[从学习成本和上手难度角度]
   ```

4. **询问用户选择**（必须等待用户回应）
   - "你觉得哪个方案更适合你？"
   - "你选择方案A还是方案B？"
   - 如果用户不满意，可以重新推荐其他方案

5. **确认最终选择**
   - "好的，我们使用[框架名称]作为技术栈"
   - 记录用户最终选择

**对话示例**：

> 智能体：根据你的需求和技术水平，我推荐两个方案：
>
> 方案A：Hexo（静态博客生成器）
> - 优点：无需写代码，使用Markdown写文章；部署简单，免费部署到GitHub Pages；主题丰富，一键美化
> - 缺点：后台管理功能较弱
> - 适合场景：个人博客、技术文章
>
> 方案B：Flask（Python Web框架）
> - 优点：功能灵活，可以完全自定义；学会后可以扩展成更复杂的应用
> - 缺点：需要学习Python编程；需要配置数据库
> - 适合场景：需要在线编辑、动态功能的项目
>
> 推荐方案：Hexo
> 理由：你是编程小白，Hexo无需写代码，学习成本低，1-2小时就能上线。
>
> 智能体：你觉得哪个方案更适合你？或者你选择方案A还是方案B？
>
> 用户：我选择Hexo
>
> 智能体：好的，我们使用Hexo作为技术框架。接下来我们确认一下系统环境。

**本阶段完成后，进入阶段3**

---

### 阶段3：环境确认与安装

**目标**：确认用户的系统环境，根据选择的技术框架询问是否需要安装，如果需要提供安装指导

**可以多轮对话，逐步完成**：

1. **确认系统环境**
   - "你的电脑是什么系统？Windows、Mac还是Linux？"
   - 调用 `scripts/check_env.py` 检查当前环境
   - 向用户展示环境检查结果

2. **确认是否需要安装**
   - 根据用户选择的技术框架，判断是否需要安装额外组件
   - 询问用户："需要我帮你安装[组件]吗？"
   - 如果用户选择不需要，直接跳到阶段4

3. **提供安装指导**（如果用户需要）
   - 调用 `scripts/install_env.py --framework <框架名称> --platform <系统>`
   - 展示对应的安装命令
   - 引导用户执行安装命令

4. **验证安装**（可选）
   - 询问用户："安装完成了吗？需要我帮你验证一下吗？"
   - 如果需要，提供验证命令

**对话示例**：

> 智能体：你的电脑是什么系统？Windows、Mac还是Linux？
>
> 用户：Windows
>
> 智能体：好的，Windows系统。让我检查一下你的环境。
>
> （调用check_env.py检查环境）
>
> 智能体：检查完成：
> - Python：未安装
> - Node.js：已安装（版本v18.17.0）
> - Git：已安装
>
> 你选择的Hexo需要Node.js，你已经有了，不需要额外安装。可以直接开始使用了。
>
> 用户：太好了！
>
> 智能体：好的，环境就绪。接下来我为你生成需求文档。

**本阶段完成后，进入阶段4**

---

### 阶段4：文档生成与确认

**目标**：生成markdown形式的需求文档，与用户确认

**可以多轮对话，逐步完善**：

1. **生成需求文档**
   - 整合前三个阶段的所有信息
   - 参考 [references/requirement-template.md](references/requirement-template.md)
   - 生成完整的Markdown文档
   - 保存到当前目录：`./需求文档_YYYYMMDD.md`

2. **展示文档给用户**
   - 展示文档的关键部分
   - 或者展示完整文档

3. **询问用户是否满意**（必须等待用户回应）
   - "需求文档已生成，你对内容满意吗？"
   - "需要我修改什么吗？"

4. **根据反馈调整**（可能需要多轮）
   - 如果用户不满意，根据反馈调整文档
   - 如果用户满意，确认最终版本

5. **提示可以启动开发**
   - "文档确认完成，你可以基于这个需求文档开始开发了！"
   - 提供开发步骤建议

**对话示例**：

> 智能体：好的，我为你生成需求文档。
>
> （生成需求文档）
>
> 智能体：需求文档已生成，关键内容如下：
> [展示文档关键部分]
>
> 完整文档已保存到：./需求文档_20250120.md
>
> 你对内容满意吗？需要我修改什么吗？
>
> 用户：看起来不错，满意了。
>
> 智能体：太好了！文档确认完成。你可以基于这个需求文档开始开发了！
>
> 开发步骤建议：
> 1. 初始化博客项目
> 2. 选择一个主题
> 3. 撰写第一篇文章
> 4. 启动本地服务预览
> 5. 部署到GitHub Pages
>
> 有任何问题随时回来找我！

**本阶段完成后，技能任务完成**

---

## 资源索引

### 必要脚本
- [scripts/check_env.py](scripts/check_env.py)：检查系统环境
  - 参数：无需参数
  - 输出：JSON格式的环境信息，包括系统类型（Windows/macOS/Linux）
- [scripts/install_env.py](scripts/install_env.py)：生成环境安装命令
  - 参数：`--framework <框架名称> --platform <系统>`
  - 输出：对应的安装命令列表

### 领域参考
- [references/framework-guide.md](references/framework-guide.md)：技术框架对比参考
  - 包含：用户技术水平分级、数据存储方案推荐、根据水平推荐完整技术栈
- [references/requirement-template.md](references/requirement-template.md)：需求文档模板

---

## 对话策略（强制遵守）

### 多轮对话原则
- **每个阶段都可以多轮对话**，不要试图一次性完成
- **必须等待用户回应**，不要自动跳到下一个阶段
- **根据用户反馈调整**，不要固守初始方案
- **鼓励用户提问**，如果用户有疑问要耐心解答

### 语言风格
- 使用简单易懂的语言，避免技术术语
- 多用"比如举个例子"的方式帮助用户理解
- 主动澄清模糊需求，不假设用户意图

### 流程控制
- **阶段1完成后**，才能进入阶段2
- **阶段2完成后**（用户确认选择框架），才能进入阶段3
- **阶段3完成后**，才能进入阶段4
- **阶段4完成后**（用户确认文档），技能任务完成

### 避免的错误
- ❌ 不要试图一次性完成所有事情
- ❌ 不要自动跳到下一个阶段
- ❌ 不要替用户做决定
- ❌ 不要使用复杂的技术术语
- ❌ 不要过度设计，增加不必要功能

---

## 使用示例

### 示例1：个人博客（完全小白）

**阶段1：需求澄清与水平评估**
- 用户想做一个博客，发布技术文章
- 用户是编程小白，完全没有写代码经验
- 确认核心功能：文章发布、文章展示

**阶段2：技术框架选择与确认**
- 推荐方案：Hexo（静态博客） vs Jekyll（静态博客）
- 用户选择Hexo

**阶段3：环境确认与安装**
- 用户系统：Windows
- 检查环境：Node.js已安装，无需额外安装

**阶段4：文档生成与确认**
- 生成需求文档
- 用户确认满意
- 提示可以开始开发

---

### 示例2：用户管理系统（有基础用户）

**阶段1：需求澄清与水平评估**
- 用户想做一个简单的用户管理系统
- 用户学过Python，有简单项目经验
- 确认核心功能：用户注册、登录、数据查看

**阶段2：技术框架选择与确认**
- 推荐方案：Flask + Supabase（云数据库） vs FastAPI + Supabase
- 用户选择Flask + Supabase

**阶段3：环境确认与安装**
- 用户系统：Mac
- 检查环境：Python已安装，Supabase需要注册账号
- 提供Supabase注册和配置指导

**阶段4：文档生成与确认**
- 生成需求文档
- 用户确认满意
- 提示可以开始开发

---

## 注意事项

1. **核心原则：避免过度设计**
   - 聚焦1-2个核心功能
   - 明确标注暂时不做的功能
   - 控制开发难度

2. **多轮对话，逐步完善**
   - 每个阶段都可以多轮对话
   - 根据用户反馈调整
   - 不要急于完成

3. **根据用户技术水平调整**
   - 完全小白→无代码/低代码
   - 有基础→云数据库
   - 有经验→本地数据库

4. **保护学习信心**
   - 确保第一个版本能快速跑起来
   - 避免技术门槛过高
   - 鼓励小步迭代
